<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iKala Data Lake</title>
    <meta name="description" content="">
    <link rel="icon" href="/documentation/assets/img/favicon.ico">
    
    <link rel="preload" href="/documentation/assets/css/0.styles.d4c03a4d.css" as="style"><link rel="preload" href="/documentation/assets/js/app.d3898906.js" as="script"><link rel="preload" href="/documentation/assets/js/2.e1ba7fba.js" as="script"><link rel="preload" href="/documentation/assets/js/11.962a218d.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.37b7d33c.js"><link rel="prefetch" href="/documentation/assets/js/12.ab6c882b.js"><link rel="prefetch" href="/documentation/assets/js/13.6d9a21ca.js"><link rel="prefetch" href="/documentation/assets/js/3.929ee62c.js"><link rel="prefetch" href="/documentation/assets/js/4.5a7955c3.js"><link rel="prefetch" href="/documentation/assets/js/5.fdd4f841.js"><link rel="prefetch" href="/documentation/assets/js/6.c3a9c1d2.js"><link rel="prefetch" href="/documentation/assets/js/7.a85b6b8a.js"><link rel="prefetch" href="/documentation/assets/js/8.98572b8b.js"><link rel="prefetch" href="/documentation/assets/js/9.a4a11580.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.d4c03a4d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/assets/img/logo.png" alt="iKala Data Lake" class="logo"> <span class="site-name can-hide">iKala Data Lake</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/documentation/" class="sidebar-link">Introduction</a></li><li><a href="/documentation/getstarted.html" class="sidebar-link">Get Started</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Hit</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/hit.html" class="sidebar-link">Hit</a></li><li><a href="/documentation/pageview.html" class="sidebar-link">- Page View</a></li><li><a href="/documentation/event.html" class="sidebar-link">- Event</a></li><li><a href="/documentation/transaction.html" class="active sidebar-link"> - Transaction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/transaction.html#purchase" class="sidebar-link">purchase</a></li><li class="sidebar-sub-header"><a href="/documentation/transaction.html#refund" class="sidebar-link">refund</a></li></ul></li></ul></section></li><li><a href="/documentation/userid.html" class="sidebar-link">Visitor ID / User ID</a></li><li><a href="/documentation/faqs.html" class="sidebar-link">FAQs</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="transaction"><a href="#transaction" class="header-anchor">#</a> Transaction</h1> <p>Different from event hit, transaction is specially used to record transaction information, including two types of transaction like purchase and refund.</p> <p>Using Transaction can help you keep track of users' e-commerce transaction behaviour and learn which products bring you the most profit.</p> <p>Transaction hit list:</p> <ul><li><a href="#purchase">purchase</a></li> <li><a href="#refund">refund</a></li></ul> <p>Following code shows example of sending transaction hit to iKala Data Lake:</p> <h3 id="web-javascript"><a href="#web-javascript" class="header-anchor">#</a> Web - Javascript</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ika<span class="token punctuation">.</span><span class="token function">addTransaction</span><span class="token punctuation">(</span><span class="token string">'purchase'</span><span class="token punctuation">,</span> 
    <span class="token punctuation">{</span> 
        orderId<span class="token punctuation">:</span> <span class="token string">'ORDERID_123'</span><span class="token punctuation">,</span>
        payType<span class="token punctuation">:</span> <span class="token string">'visa'</span><span class="token punctuation">,</span>
        shipType<span class="token punctuation">:</span> <span class="token string">'fedex'</span><span class="token punctuation">,</span>
        shipCost<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        revenue<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
        currency<span class="token punctuation">:</span> <span class="token string">'TWD'</span><span class="token punctuation">,</span>       
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="android-java"><a href="#android-java" class="header-anchor">#</a> Android - Java</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Tracker</span> tracker <span class="token operator">=</span> <span class="token class-name">Tracker</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Bundle</span> bundle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">TransactionParam</span><span class="token punctuation">.</span>KEY_ORDER_ID<span class="token punctuation">,</span> <span class="token string">&quot;ORDERID_123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">TransactionParam</span><span class="token punctuation">.</span>KEY_PAY_TYPE<span class="token punctuation">,</span> <span class="token string">&quot;visa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">TransactionParam</span><span class="token punctuation">.</span>KEY_SHIP_TYPE<span class="token punctuation">,</span> <span class="token string">&quot;fedex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putFloat</span><span class="token punctuation">(</span><span class="token class-name">TransactionParam</span><span class="token punctuation">.</span>KEY_SHIP_COST<span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putFloat</span><span class="token punctuation">(</span><span class="token class-name">TransactionParam</span><span class="token punctuation">.</span>KEY_REV<span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token class-name">TransactionParam</span><span class="token punctuation">.</span>KEY_CURRENCY<span class="token punctuation">,</span> <span class="token string">&quot;TWD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tracker<span class="token punctuation">.</span><span class="token function">addTransaction</span><span class="token punctuation">(</span><span class="token class-name">TransactionName</span><span class="token punctuation">.</span>TRANS_PURCHASE<span class="token punctuation">,</span> bundle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ios-swift"><a href="#ios-swift" class="header-anchor">#</a> iOS - Swift</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">try</span><span class="token operator">?</span> <span class="token builtin">Tracker</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">addTransaction</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token punctuation">.</span>refund<span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token builtin">TransactionParam</span><span class="token punctuation">.</span>orderId<span class="token punctuation">:</span> <span class="token string">&quot;ORDERID_123&quot;</span><span class="token punctuation">,</span>
    <span class="token builtin">TransactionParam</span><span class="token punctuation">.</span>payType<span class="token punctuation">:</span> <span class="token string">&quot;visa&quot;</span><span class="token punctuation">,</span>
    <span class="token builtin">TransactionParam</span><span class="token punctuation">.</span>shipType<span class="token punctuation">:</span> <span class="token string">&quot;fedex&quot;</span><span class="token punctuation">,</span>
    <span class="token builtin">TransactionParam</span><span class="token punctuation">.</span>shipCost<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
    <span class="token builtin">TransactionParam</span><span class="token punctuation">.</span>revenue<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
    <span class="token builtin">TransactionParam</span><span class="token punctuation">.</span>currency<span class="token punctuation">:</span> <span class="token string">&quot;TWD&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h1 id="transaction-hits-list"><a href="#transaction-hits-list" class="header-anchor">#</a> Transaction hits list</h1> <h2 id="purchase"><a href="#purchase" class="header-anchor">#</a> purchase</h2> <p>This transaction hit can be sent after the purchase is successfully completed. The tracking code can be placed at the moment the order is completed, which may be the transaction receipt page.</p> <p>Parameters</p> <table><thead><tr><th>Key</th> <th>Value Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>orderId</td> <td><code>string</code></td> <td>No</td> <td>The ID of order</td></tr> <tr><td>payType</td> <td><code>string</code></td> <td>No</td> <td>Payment type which choosed by customer. ex:<code>visa</code>.</td></tr> <tr><td>shipType</td> <td><code>string</code></td> <td>No</td> <td>Shipping type which choosed by customer. ex:<code>fedex</code>.</td></tr> <tr><td>shipCost</td> <td><code>float</code></td> <td>No</td> <td>The cost amount of shipping.</td></tr> <tr><td>revenue</td> <td><code>float</code></td> <td>No</td> <td>Total revenue of order including shipping fee.</td></tr> <tr><td>currency</td> <td><code>string</code></td> <td>No</td> <td>The currency of a item.</td></tr></tbody></table> <h2 id="refund"><a href="#refund" class="header-anchor">#</a> refund</h2> <p>To refund a transaction</p> <p>Parameters</p> <table><thead><tr><th>Key</th> <th>Value Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>orderId</td> <td><code>string</code></td> <td>No</td> <td>The ID of order.</td></tr> <tr><td>refundId</td> <td><code>string</code></td> <td>No</td> <td>The ID of refund.</td></tr> <tr><td>reason</td> <td><code>string</code></td> <td>No</td> <td>The reason that consumer refunds the order.</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/event.html" class="prev">- Event</a></span> <span class="next"><a href="/documentation/userid.html">Visitor ID / User ID</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.d3898906.js" defer></script><script src="/documentation/assets/js/2.e1ba7fba.js" defer></script><script src="/documentation/assets/js/11.962a218d.js" defer></script>
  </body>
</html>
